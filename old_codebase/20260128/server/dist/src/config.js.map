{
  "version": 3,
  "sources": ["../../src/config.ts"],
  "sourcesContent": ["/**\r\n * Configuration Module\r\n * Manages CLI flags, environment variables, and runtime configuration\r\n */\r\n\r\nimport * as process from \"process\";\r\nimport * as path from \"path\";\r\nimport * as fs from \"fs\";\r\n\r\n// CLI Flags\r\nconst args = process.argv.slice(2);\r\n\r\nexport const MOCKED_LLM = args.some(arg => arg.includes(\"--mocked-llm\") && (arg.includes(\"=true\") || !arg.includes(\"=false\")));\r\nexport const SKIP_REDIS = args.some(arg => arg.includes(\"--skip-redis\") && (arg.includes(\"=true\") || !arg.includes(\"=false\")));\r\n// DISABLED DeepSeek - Always use OpenAI (ChatGPT 4o) as default\r\nexport const ENABLE_OPENAI = true; // Force OpenAI, ignore --enable-openai flag\r\nexport const DEPLOYED_AS_ROOT = args.some(arg => arg.includes(\"--deployed-as-root\") && (arg.includes(\"=true\") || !arg.includes(\"=false\")));\r\nexport const ENABLE_HTTPS = args.some(arg => arg.includes(\"--enable-https\") && (arg.includes(\"=true\") || !arg.includes(\"=false\")));\r\n\r\n// Parse --indexers flag (default: 2, ignored if DEPLOYED_AS_ROOT)\r\nconst indexersArg = args.find(arg => arg.startsWith(\"--indexers\"));\r\nexport const NUM_GARDENS = DEPLOYED_AS_ROOT ? 0 : (indexersArg ? parseInt(indexersArg.split(\"=\")[1] || \"2\") : 2);\r\n\r\n// Parse --token-indexers flag (default: 2, ignored if DEPLOYED_AS_ROOT)\r\nconst tokenIndexersArg = args.find(arg => arg.startsWith(\"--token-indexers\"));\r\nexport const NUM_TOKEN_GARDENS = DEPLOYED_AS_ROOT ? 0 : (tokenIndexersArg ? parseInt(tokenIndexersArg.split(\"=\")[1] || \"2\") : 2);\r\n\r\n// Server Configuration\r\nexport const HTTP_PORT = parseInt(process.env.HTTP_PORT || \"3000\");\r\n// FRONTEND_PATH: Resolve relative to project root (not server directory)\r\n// When running with ts-node: __dirname = server/src, so ../.. = project root\r\n// When running compiled: __dirname = server/dist/src, so ../../.. = project root\r\n// Use a more robust approach: go up until we find the frontend directory\r\nlet projectRoot = __dirname;\r\nlet foundFrontend = false;\r\n// Go up at most 5 levels to find project root\r\nfor (let i = 0; i < 5; i++) {\r\n  const frontendPath = path.join(projectRoot, \"frontend\");\r\n  if (fs.existsSync(frontendPath)) {\r\n    foundFrontend = true;\r\n    break;\r\n  }\r\n  const parent = path.dirname(projectRoot);\r\n  if (parent === projectRoot) {\r\n    // Reached filesystem root\r\n    break;\r\n  }\r\n  projectRoot = parent;\r\n}\r\n\r\nif (!foundFrontend) {\r\n  // Fallback: assume project root is 2 levels up from server/src\r\n  projectRoot = path.resolve(__dirname, \"../..\");\r\n  console.warn(`\u26A0\uFE0F  Could not find frontend directory by traversing up from ${__dirname}`);\r\n  console.warn(`   Using fallback project root: ${projectRoot}`);\r\n}\r\n\r\nexport const FRONTEND_PATH = process.env.FRONTEND_PATH || path.join(projectRoot, \"frontend/dist/eden-sim-frontend\");\r\nconsole.log(`\uD83D\uDCC1 [Config] __dirname: ${__dirname}`);\r\nconsole.log(`\uD83D\uDCC1 [Config] Resolved project root: ${projectRoot}`);\r\nconsole.log(`\uD83D\uDCC1 [Config] Resolved FRONTEND_PATH: ${FRONTEND_PATH}`);\r\nconsole.log(`\uD83D\uDCC1 [Config] Frontend directory exists: ${fs.existsSync(FRONTEND_PATH)}`);\r\nif (fs.existsSync(FRONTEND_PATH)) {\r\n  try {\r\n    const files = fs.readdirSync(FRONTEND_PATH);\r\n    console.log(`\uD83D\uDCC1 [Config] Files in frontend directory: ${files.slice(0, 5).join(', ')}${files.length > 5 ? '...' : ''}`);\r\n  } catch (e) {\r\n    console.log(`\uD83D\uDCC1 [Config] Could not read frontend directory: ${e}`);\r\n  }\r\n} else {\r\n  // Check if parent directories exist\r\n  const frontendDistPath = path.join(projectRoot, \"frontend/dist\");\r\n  const frontendPath = path.join(projectRoot, \"frontend\");\r\n  console.log(`\uD83D\uDCC1 [Config] frontend/dist exists: ${fs.existsSync(frontendDistPath)}`);\r\n  console.log(`\uD83D\uDCC1 [Config] frontend exists: ${fs.existsSync(frontendPath)}`);\r\n}\r\n\r\n// HTTPS Configuration\r\nexport const CERT_DIR = path.join(__dirname, \"..\", \"certs\");\r\nexport const SERVER_KEY_PATH = path.join(CERT_DIR, \"server-key.pem\");\r\nexport const SERVER_CERT_PATH = path.join(CERT_DIR, \"server-cert.pem\");\r\nexport const CA_CERT_PATH = path.join(CERT_DIR, \"ca-cert.pem\");\r\n\r\n// Stripe Configuration (hardcoded as requested)\r\nexport const STRIPE_SECRET_KEY = \"sk_test_51RrflYP4h6MOSVxDAFUAr0i7mmsQ8MSGi9Y0atxTsVaeVZsokRn09C9AEc0TWHidYdicNnGBTRpgJsoGz2CsZ0HC009CA5NFCn\";\r\nexport const STRIPE_PUBLISHABLE_KEY = \"pk_test_51RrflYP4h6MOSVxDENdMiwOSbNudvzG8PlrrhslZjfbg9qPvb8YkzVR42ro5bQ8nXUnnbuPQpSlI43SHBuKhiCS000VgCDGNrC\";\r\nexport const STRIPE_WEBHOOK_SECRET = \"whsec_your_webhook_secret_here\"; // Update with actual webhook secret from Stripe dashboard\r\n\r\n// Provider webhook demo behavior (default off for real deployments)\r\nexport const EDEN_ENABLE_MOCK_PROVIDER_WEBHOOKS = String(process.env.EDEN_ENABLE_MOCK_PROVIDER_WEBHOOKS || \"\").toLowerCase() === \"true\";\r\n\r\n// OpenAI API Key (hardcoded)\r\n// Parse --openai-api-key flag and set it in process.env if provided, otherwise use hardcoded value\r\nconst openaiApiKeyArg = args.find(arg => arg.startsWith(\"--openai-api-key\"));\r\nif (openaiApiKeyArg) {\r\n  const apiKey = openaiApiKeyArg.split(\"=\")[1];\r\n  if (apiKey) {\r\n    process.env.OPENAI_API_KEY = apiKey;\r\n    console.log(`\u2705 [Config] OpenAI API key set from command line argument`);\r\n  } else {\r\n    console.warn(`\u26A0\uFE0F [Config] --openai-api-key flag provided but no value specified`);\r\n  }\r\n} else if (!process.env.OPENAI_API_KEY) {\r\n  // Hardcoded API key\r\n  process.env.OPENAI_API_KEY = \"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\";\r\n  console.log(`\u2705 [Config] Using hardcoded OpenAI API key`);\r\n}\r\n\r\n"],
  "mappings": "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",
  "names": []
}
