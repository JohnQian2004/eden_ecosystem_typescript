{
  "version": 3,
  "sources": ["../../src/flowwiseHandlers.ts"],
  "sourcesContent": ["/**\r\n * FlowWise Action Handlers\r\n * Maps workflow actions to actual function calls\r\n */\r\n\r\nimport * as crypto from \"crypto\";\r\nimport type { WorkflowContext } from \"./flowwise\";\r\n// COMMENTED OUT: resolveLLM is disabled - use formatResponseWithOpenAI directly instead\r\n// import { resolveLLM, extractQueryWithOpenAI, formatResponseWithOpenAI } from \"./llm\";\r\nimport { extractQueryWithOpenAI, formatResponseWithOpenAI } from \"./llm\";\r\nimport { addLedgerEntry, processPayment, completeBooking, getCashierStatus } from \"./ledger\";\r\nimport { getWalletBalance, creditWallet, debitWallet } from \"./wallet\";\r\nimport { executeDEXTrade } from \"./dex\";\r\nimport { queryROOTCAServiceRegistry, queryServiceProviders, queryDEXPoolAPI } from \"./serviceProvider\";\r\nimport { validateCertificate, getCertificate } from \"./garden\";\r\nimport { ROOT_CA_SERVICE_REGISTRY, USERS, LEDGER } from \"./state\";\r\nimport { createSnapshot, persistSnapshot, streamToIndexers } from \"./redis\";\r\nimport type { User, TransactionSnapshot, LedgerEntry, LLMResponse, MovieListing, TokenListing } from \"./types\";\r\n\r\n/**\r\n * Create action handlers map for FlowWise workflows\r\n */\r\nexport function createActionHandlers(): Map<string, (action: any, context: WorkflowContext) => Promise<any>> {\r\n  const handlers = new Map<string, (action: any, context: WorkflowContext) => Promise<any>>();\r\n  \r\n  // LLM Actions\r\n  handlers.set(\"llm_extract_query\", async (action, context) => {\r\n    const result = await extractQueryWithOpenAI(context.input);\r\n    return { queryResult: result };\r\n  });\r\n  \r\n  handlers.set(\"llm_format_response\", async (action, context) => {\r\n    // DISABLED: This handler uses resolveLLM which doesn't have hardcoded DEX mock data\r\n    // Use formatResponseWithOpenAI/formatResponseWithDeepSeek directly instead\r\n    // This handler is likely not being used, but updating it just in case\r\n    console.warn(`\u26A0\uFE0F [flowwiseHandlers] llm_format_response handler called - this should use formatResponseWithOpenAI instead of resolveLLM`);\r\n    \r\n    // Handle case when there are no listings - return a helpful \"no results\" message\r\n    if (!context.listings || context.listings.length === 0) {\r\n      console.log(`\u26A0\uFE0F [flowwiseHandlers] No listings found - creating \"no results\" response`);\r\n      const userInput = context.input || context.userInput || \"your request\";\r\n      const serviceType = context.serviceType || context.queryResult?.query?.serviceType || \"service\";\r\n      \r\n      // Create a helpful \"no results\" response\r\n      const noResultsResponse = {\r\n        message: `I couldn't find any ${serviceType} options matching \"${userInput}\". Please try a different search term or check back later.`,\r\n        listings: [],\r\n        selectedListing: null,\r\n        selectedListing2: null,\r\n        iGasCost: 0 // No LLM cost for no-results response\r\n      };\r\n      \r\n      return { \r\n        llmResponse: noResultsResponse, \r\n        selectedListing: null, \r\n        selectedListing2: null, \r\n        iGasCost: 0 \r\n      };\r\n    }\r\n    \r\n    const { formatResponseWithOpenAI } = await import(\"./llm\");\r\n    const llmResponse = await formatResponseWithOpenAI(\r\n      context.listings,\r\n      context.input || context.userInput || \"\",\r\n      context.queryResult?.query?.filters\r\n    );\r\n    return { llmResponse, selectedListing: llmResponse.selectedListing, selectedListing2: llmResponse.selectedListing2, iGasCost: llmResponse.iGasCost };\r\n  });\r\n  \r\n  // Service Registry Actions\r\n  handlers.set(\"query_service_registry\", async (action, context) => {\r\n    const providers = await queryROOTCAServiceRegistry(action.serviceType, action.filters);\r\n    return { providers };\r\n  });\r\n  \r\n  handlers.set(\"query_dex_pools\", async (action, context) => {\r\n    const pools = await queryDEXPoolAPI(action.tokenSymbol, action.baseToken, action.action);\r\n    return { listings: pools };\r\n  });\r\n  \r\n  // Wallet Actions\r\n  handlers.set(\"check_balance\", async (action, context) => {\r\n    const balance = await getWalletBalance(action.email);\r\n    const required = action.required || 0;\r\n    if (balance < required) {\r\n      throw new Error(`Insufficient balance. Required: ${required}, Available: ${balance}`);\r\n    }\r\n    return { balance, hasSufficientBalance: true };\r\n  });\r\n  \r\n  // Snapshot Actions\r\n  handlers.set(\"create_snapshot\", async (action, context) => {\r\n    const snapshot = createSnapshot(action.payer, action.amount, action.providerId);\r\n    return { snapshot };\r\n  });\r\n  \r\n  handlers.set(\"persist_snapshot\", async (action, context) => {\r\n    await persistSnapshot(action.snapshot);\r\n    return { snapshotPersisted: true };\r\n  });\r\n  \r\n  handlers.set(\"stream_to_indexers\", async (action, context) => {\r\n    await streamToIndexers(action.snapshot);\r\n    return { streamed: true };\r\n  });\r\n  \r\n  // Certificate Actions\r\n  handlers.set(\"validate_certificate\", async (action, context) => {\r\n    const isValid = validateCertificate(action.providerUuid);\r\n    if (!isValid) {\r\n      throw new Error(`Certificate invalid or revoked: ${action.providerUuid}`);\r\n    }\r\n    const cert = getCertificate(action.providerUuid);\r\n    return { certificate: cert, isValid: true };\r\n  });\r\n  \r\n  // Ledger Actions\r\n  handlers.set(\"add_ledger_entry\", async (action, context) => {\r\n    const entry = addLedgerEntry(\r\n      action.snapshot,\r\n      action.serviceType,\r\n      action.iGasCost,\r\n      action.payerId,\r\n      action.merchantName,\r\n      action.providerUuid,\r\n      action.bookingDetails\r\n    );\r\n    return { ledgerEntry: entry };\r\n  });\r\n  \r\n  handlers.set(\"complete_booking\", async (action, context) => {\r\n    completeBooking(action.ledgerEntry);\r\n    return { completed: true };\r\n  });\r\n  \r\n  // Cashier Actions\r\n  handlers.set(\"process_payment\", async (action, context) => {\r\n    const cashier = getCashierStatus();\r\n    const user = context.user;\r\n    const success = await processPayment(cashier, action.ledgerEntry, user);\r\n    if (!success) {\r\n      throw new Error(`Payment failed. Balance: ${user.balance}, Required: ${action.ledgerEntry.amount}`);\r\n    }\r\n    return { paymentSuccess: true, updatedBalance: user.balance, updatedCashier: cashier };\r\n  });\r\n  \r\n  // DEX Actions\r\n  handlers.set(\"execute_dex_trade\", async (action, context) => {\r\n    // NEW: Use Order Processor for real-time DEX trading\r\n    const { createDEXOrder, processOrder, createOrderIntentFromQuery } = await import(\"./dex/orderProcessor\");\r\n    \r\n    const ctxAny: any = context as any;\r\n    const ctxSelected = ctxAny.selectedListing || ctxAny.llmResponse?.selectedListing || ctxAny.selectedListing2 || ctxAny.llmResponse?.selectedListing2;\r\n    \r\n    // Create order intent from context\r\n    const orderIntent = createOrderIntentFromQuery(\r\n      context.queryResult,\r\n      ctxSelected,\r\n      context.userInput || ''\r\n    );\r\n    \r\n    // Override with action parameters if provided\r\n    if (action.action) orderIntent.side = action.action;\r\n    if (action.tokenAmount) orderIntent.amount = action.tokenAmount;\r\n    if (action.price) orderIntent.price = action.price;\r\n    if (action.matchingModel) orderIntent.matchingModel = action.matchingModel;\r\n    \r\n    // CRITICAL: If baseAmount is specified but tokenAmount is not, convert baseAmount to tokenAmount\r\n    // This handles cases like \"Trade 2 SOL with TOKEN\" where user specifies baseAmount\r\n    const baseAmount = context.baseAmount || context.queryResult?.query?.filters?.baseAmount;\r\n    if (baseAmount && baseAmount > 0 && (!orderIntent.amount || orderIntent.amount === 1)) {\r\n      // Calculate tokenAmount from baseAmount using pool price\r\n      const poolPrice = ctxSelected?.price || 0.001; // Default price if missing\r\n      orderIntent.amount = baseAmount / poolPrice;\r\n      console.log(`\uD83D\uDCB0 [DEX Handler] Converting baseAmount to tokenAmount: ${baseAmount} ${ctxSelected?.baseToken || 'SOL'} / ${poolPrice} = ${orderIntent.amount} ${ctxSelected?.tokenSymbol || 'TOKEN'}`);\r\n    }\r\n    \r\n    // Determine pair from selected listing or context\r\n    if (ctxSelected?.tokenSymbol && ctxSelected?.baseToken) {\r\n      orderIntent.pair = `${ctxSelected.tokenSymbol}/${ctxSelected.baseToken}`;\r\n    }\r\n    \r\n    const userEmail = action.userEmail || context.user?.email;\r\n    if (!userEmail) {\r\n      throw new Error(\"User email required for DEX trade\");\r\n    }\r\n    \r\n    const userId = context.user?.id || `u_${userEmail.replace('@', '_').replace('.', '_')}`;\r\n    const gardenId = ctxSelected?.gardenId || ctxSelected?.providerId || \"Garden-DEX-T1\";\r\n    \r\n    // Create order\r\n    console.log(`\uD83D\uDCDD [DEX] Creating order from intent:`, orderIntent);\r\n    const order = createDEXOrder(\r\n      orderIntent,\r\n      userId,\r\n      userEmail,\r\n      gardenId,\r\n      {\r\n        workflowExecutionId: context.workflowExecutionId,\r\n        selectedListing: ctxSelected\r\n      }\r\n    );\r\n    \r\n    // Process order (match, settle, broadcast)\r\n    console.log(`\uD83D\uDD04 [DEX] Processing order: ${order.orderId}`);\r\n    const result = await processOrder(order);\r\n    \r\n    // Update context with order and trade\r\n    context.dexOrder = order;\r\n    if (result.trade) {\r\n      context.trade = result.trade;\r\n      context.totalCost = result.trade.baseAmount + (context.iGasCost || 0);\r\n    }\r\n    \r\n    // Update wallet balance (settlement handles actual debit/credit, but we update context for immediate feedback)\r\n    const { getWalletBalance } = await import(\"./wallet\");\r\n    const currentBalance = await getWalletBalance(userEmail);\r\n    if (context.user) {\r\n      context.user.balance = currentBalance;\r\n    }\r\n    \r\n    return {\r\n      order,\r\n      trade: result.trade,\r\n      updatedBalance: currentBalance,\r\n      settlement: result.settlement,\r\n      matchResult: result.matchResult,\r\n      ledgerEntry: result.ledgerEntry // Ledger entry created by settlement\r\n    };\r\n  });\r\n  \r\n  // Review Actions\r\n  handlers.set(\"apply_review\", async (action, context) => {\r\n    const user = action.user;\r\n    const moviePrice = action.moviePrice;\r\n    const rebate = moviePrice * 0.1; // 10% rebate\r\n    \r\n    const rebateResult = await creditWallet(\r\n      user.email,\r\n      rebate,\r\n      crypto.randomUUID(),\r\n      `Review rebate: ${action.review.rating}/5 rating`,\r\n      {\r\n        reviewRating: action.review.rating,\r\n        moviePrice,\r\n        rebateType: \"review\",\r\n      }\r\n    );\r\n    \r\n    if (rebateResult.success) {\r\n      user.balance = rebateResult.balance;\r\n    }\r\n    \r\n    return { rebate, updatedBalance: user.balance };\r\n  });\r\n  \r\n  // Webhook Actions\r\n  handlers.set(\"deliver_webhook\", async (action, context) => {\r\n    // Webhook delivery is async and best-effort\r\n    const { deliverWebhook } = await import(\"./ledger\");\r\n    deliverWebhook(action.providerId, action.snapshot, action.ledgerEntry).catch(err => {\r\n      console.warn(`\u26A0\uFE0F  Webhook delivery failed:`, err);\r\n    });\r\n    return { webhookDelivered: true };\r\n  });\r\n  \r\n  // Summary Actions\r\n  handlers.set(\"generate_summary\", async (action, context) => {\r\n    return {\r\n      summary: {\r\n        balance: action.balance,\r\n        rebate: action.rebate,\r\n        fees: action.fees,\r\n        iGasCost: action.iGasCost,\r\n        selectedProvider: action.selectedProvider,\r\n        movie: action.movie\r\n      }\r\n    };\r\n  });\r\n  \r\n  // Validation Actions\r\n  handlers.set(\"validate\", async (action, context) => {\r\n    const value = context[action.field];\r\n    if (action.required && !value) {\r\n      throw new Error(`Required field missing: ${action.field}`);\r\n    }\r\n    if (action.format === \"email\" && value && !value.includes(\"@\")) {\r\n      throw new Error(`Invalid email format: ${value}`);\r\n    }\r\n    return { [`${action.field}Valid`]: true };\r\n  });\r\n  \r\n  return handlers;\r\n}\r\n\r\n"],
  "mappings": "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",
  "names": ["formatResponseWithOpenAI", "getWalletBalance"]
}
