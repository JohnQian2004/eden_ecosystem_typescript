<div class="eden-autoparts-container">
  <div class="autoparts-header">
    <div class="autoparts-header-left">
      <h4 class="mb-0">ğŸ”§ AutoParts Search</h4>
      <small class="text-muted">Search for auto parts and accessories</small>
    </div>
  </div>

  <div class="autoparts-search-bar">
    <div class="search-input-wrapper">
      <input 
        type="text" 
        class="form-control form-control-lg" 
        [(ngModel)]="searchQuery"
        (keyup.enter)="performSearch()"
        placeholder="Search for auto parts (e.g., '2020 Nissan Altima front bumper')..."
        [disabled]="isLoading">
      <button 
        class="btn btn-primary btn-lg" 
        (click)="performSearch()"
        [disabled]="isLoading || !searchQuery.trim()">
        <span *ngIf="!isLoading">ğŸ” Search</span>
        <span *ngIf="isLoading" class="spinner-border spinner-border-sm"></span>
      </button>
    </div>
  </div>

  <div class="autoparts-content">
    <!-- Loading State -->
    <div *ngIf="isLoading" class="text-center py-5">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Searching...</span>
      </div>
      <p class="mt-2 text-muted">Searching for auto parts...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="errorMessage && !isLoading" class="alert alert-danger" role="alert">
      <strong>Error:</strong> {{ errorMessage }}
    </div>

    <!-- No Results State -->
    <div *ngIf="hasSearched && !isLoading && !errorMessage && searchResults.length === 0" class="text-center py-5">
      <i class="bi bi-search" style="font-size: 64px; color: #ccc;"></i>
      <h5 class="mt-3 text-muted">No results found</h5>
      <p class="text-muted">Try adjusting your search query.</p>
    </div>

    <!-- Results Grid -->
    <div *ngIf="!isLoading && !errorMessage && searchResults.length > 0" class="results-grid">
      <div 
        *ngFor="let part of searchResults; let i = index" 
        class="part-card"
        (click)="openProductLink(part.link)">
        <div class="part-image-wrapper">
          <img 
            [src]="getImageUrl(part.image)" 
            [alt]="part.title"
            class="part-image"
            (error)="onImageError($event)">
        </div>
        <div class="part-info">
          <h5 class="part-title">{{ part.title }}</h5>
          <div class="part-price" *ngIf="part.price">
            <strong>{{ part.price }}</strong>
          </div>
          <div class="part-merchant" *ngIf="part.merchant || part.vendor">
            <small class="text-muted">
              {{ part.merchant || part.vendor }}
            </small>
          </div>
          <div class="part-link-hint">
            <small class="text-primary">Click to view product â†’</small>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

