<div class="card h-100 video-card-icon">
  <div class="video-thumbnail-container position-relative" (click)="togglePlay()" style="cursor: pointer;">
    <video
      *ngIf="showVideo && !videoLoadError"
      #videoElement
      class="w-100"
      [src]="videoStreamUrl"
      [muted]="true"
      [loop]="true"
      playsinline
      (loadedmetadata)="onVideoLoaded()"
      (play)="isPlaying = true"
      (pause)="isPlaying = false"
      (error)="onVideoError($event)"
      style="object-fit: cover; width: 100%; height: 100%; background: #000; display: block;"
    >
    </video>
    <div *ngIf="videoLoadError" class="w-100 d-flex align-items-center justify-content-center" style="height: 100%; background: #333; min-height: 80px;">
      <div class="text-center text-white">
        <i class="bi bi-exclamation-triangle" style="font-size: 24px;"></i>
        <p class="mb-0 mt-2" style="font-size: 0.7rem;">Video not found</p>
      </div>
    </div>
    <div *ngIf="!isPlaying" class="position-absolute top-50 start-50 translate-middle play-icon-overlay" style="pointer-events: none; z-index: 10;">
      <i class="bi bi-play-circle-fill text-white" style="font-size: 16px; opacity: 0.9; filter: drop-shadow(0 0 4px rgba(0,0,0,0.8));"></i>
    </div>
    <!-- Action buttons overlay -->
    <div class="video-action-buttons position-absolute top-0 end-0 m-1">
      <button 
        class="btn btn-sm btn-primary video-action-btn" 
        (click)="openDetails(); $event.stopPropagation()"
        title="Details"
      >
        <i class="bi bi-info-circle"></i>
      </button>
      <button 
        class="btn btn-sm btn-danger video-action-btn" 
        (click)="deleteVideo(); $event.stopPropagation()"
        title="Delete"
      >
        <i class="bi bi-trash"></i>
      </button>
    </div>
    <!-- Filename overlay at bottom -->
    <div class="video-filename-overlay position-absolute bottom-0 start-0 end-0 p-1">
      <small class="text-white text-truncate d-block" style="font-size: 0.5rem; text-shadow: 0 1px 2px rgba(0,0,0,0.8);">{{ video.filename }}</small>
    </div>
  </div>
</div>

